<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mini Store â€” Admin</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header class="site-header">
  <nav>
    <a href="index.html">Products</a>
    <a href="admin.html">Admin</a>
  </nav>
</header>

<main class="container">
  <section id="login-section">
    <h1>Admin Login</h1>
    <form id="login-form" class="card form">
      <div class="row">
        <input type="text" id="username" placeholder="Username" required />
        <input type="password" id="password" placeholder="Password" required />
      </div>
      <button type="submit">Login</button>
    </form>
  </section>

  <section id="admin-panel" style="display:none;">
    <div class="panel-header">
      <h1>Admin Panel</h1>
      <button class="secondary" onclick="logoutAdmin()">Logout</button>
    </div>

    <h2>Add Product</h2>
    <form id="product-form" class="card form">
      <div class="row">
        <input id="product-name" placeholder="Product Name" required />
        <input id="product-price" type="number" step="0.01" placeholder="Price (e.g. 1299.00)" required />
      </div>
      <div class="row">
        <input id="product-image" placeholder="Image URL (.jpg/.png/.webp)" required />
        <select id="product-category" required>
          <option value="new">new</option>
          <option value="hot">hot</option>
          <option value="all">all</option>
        </select>
      </div>
      <div class="row">
        <input id="product-color" placeholder="Color (e.g. Red)" />
        <input id="product-discount" type="number" step="1" min="0" max="95" placeholder="Discount %" value="0" />
        <input id="product-stock" type="number" step="1" min="0" placeholder="Stock amount" value="0" />
      </div>
      <textarea id="product-description" placeholder="Description"></textarea>
      <button type="submit">Save Product</button>
    </form>

    <h2>Products (Spreadsheet)</h2>
    <div class="table-wrapper card">
      <table id="data-table" class="data-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>ImageURL</th>
            <th>Category</th>
            <th>Color</th>
            <th>Discount%</th>
            <th>Stock</th>
            <th>Description</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="data-body"></tbody>
      </table>
    </div>

    <h2>Orders</h2>
    <div class="table-wrapper card">
      <table id="orders-table" class="data-table">
        <thead>
          <tr>
            <th>Time</th>
            <th>Product</th>
            <th>Color</th>
            <th>Unit Price</th>
            <th>Qty</th>
            <th>Delivery</th>
            <th>Total</th>
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Address</th>
            <th>Payment</th>
            <th>Pay Number</th>
            <th>Txn ID</th>
          </tr>
        </thead>
        <tbody id="orders-body"></tbody>
      </table>
    </div>
  </section>
</main>

<script src="script.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (localStorage.getItem('isAdminLoggedIn') === 'true') {
      document.getElementById('login-section').style.display = 'none';
      document.getElementById('admin-panel').style.display = 'block';
      renderDataTable();
      renderOrdersTable();
    }

    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const u = document.getElementById('username').value.trim();
      const p = document.getElementById('password').value.trim();
      if (u === 'TGS' && p === '9988') {
        localStorage.setItem('isAdminLoggedIn', 'true');
        document.getElementById('login-section').style.display = 'none';
        document.getElementById('admin-panel').style.display = 'block';
        renderDataTable();
        renderOrdersTable();
      } else {
        alert('Invalid credentials!');
      }
    });

    document.getElementById('product-form').addEventListener('submit', addProduct);

    window.addEventListener('storage', (e) => {
      if (e.key === STORAGE_KEY) {
        renderDataTable();
      } else if (e.key === ORDERS_KEY) {
        renderOrdersTable();
      }
    });
  });
</script>
</body>
</html>